<div class="modal-body no-p">
    <div class="row">
        <div class="col-xs-12">
            <section class="panel panel-form">
                <header class="panel-heading clearfix brtl brtr">
                    <div class="overflow-hidden">
                        <a href="javascript:;" class="h4 show no-m pt5">发展性指标(任务)自评</a>
                    </div>
                </header>
                <form id="editForm" role="form" class="form-horizontal parsley-form" data-parsley-validate
                      action="${base}/platform/evaluate/custom/editDo" method="post">
                <input name="id" type="hidden" value="${obj.id}">
                <input name="evaluateId" type="hidden" value="${obj.evaluateId}">
                <div class="row mb10">
                    <div class="col-lg-12">
                        <!--<div class="form-group">-->
                            <!--<label for="evaluateId" class="col-sm-2 control-label">评估ID</label>-->
                            <!--<div class="col-sm-8">-->
                                <!--<input type="text" id="evaluateId" class="form-control" name="evaluateId" data-parsley-required="true"-->
                                       <!--placeholder="评估ID" value="${obj.evaluateId}" >-->
                            <!--</div>-->
                        <!--</div>-->
                        <!--<div class="form-group">-->
                            <!--<label for="location" class="col-sm-2 control-label">指标序号</label>-->
                            <!--<div class="col-sm-8">-->
                                <!--<input type="text" id="location" class="form-control" name="location" data-parsley-required="true"-->
                                       <!--placeholder="指标序号" value="${obj.location}" >-->
                            <!--</div>-->
                        <!--</div>-->
                        <div class="form-group">
                            <label for="indexname" class="col-sm-2 control-label">指标</label>
                            <div class="col-sm-8">
                                <input type="text" id="indexname" class="form-control" name="indexname" data-parsley-required="true"
                                       placeholder="指标" value="${obj.indexname}" >
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="taskname" class="col-sm-2 control-label">具体发展性目标（任务)</label>
                            <div class="col-sm-8">
                                <textarea id="taskname" name="taskname" class="form-control" data-parsley-required="true" style="width:100%;height:60px;"  >${obj.taskname!}</textarea>

                            </div>
                        </div>
                        <div class="form-group">
                            <label for="taskdetail" class="col-sm-2 control-label">达成标志</label>
                            <div class="col-sm-8">
                                <textarea id="taskdetail" name="taskdetail" class="form-control" data-parsley-required="true" style="width:100%;height:60px;">${obj.taskdetail!}</textarea>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="analysis_s" class="col-sm-2 control-label">原有基础自我分析</label>
                            <div class="col-sm-8">
                                <textarea id="analysis_s" name="analysis_s" class="form-control" data-parsley-required="true" style="width:100%;height:60px;">${obj.analysis_s!}</textarea>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="weights" class="col-sm-2 control-label">分值</label>
                            <div class="col-sm-8">
                                <input type="text" id="weights" class="form-control" name="weights" data-parsley-min="0" data-parsley-max="10" data-parsley-score data-parsley-required="true"
                                       placeholder="分值" value="${obj.weights}" >
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="score_s" class="col-sm-2 control-label">自打分</label>
                            <div class="col-sm-8">
                                <input type="text" id="score_s" class="form-control" name="score_s"  data-parsley-min="0" data-parsley-max="${obj.weights}"  data-parsley-score data-parsley-required="true"
                                       placeholder="自打分" value="${obj.score_s}" >
                            </div>
                        </div>
                        <!--<div class="form-group">-->
                            <!--<label for="score_p" class="col-sm-2 control-label">督评分</label>-->
                            <!--<div class="col-sm-8">-->
                                <!--<input type="text" id="score_p" class="form-control" name="score_p" data-parsley-required="true"-->
                                       <!--placeholder="督评分" value="${obj.score_p}" >-->
                            <!--</div>-->
                        <!--</div>-->
                        <!--<div class="form-group">-->
                            <!--<label for="selfeva" class="col-sm-2 control-label">是否自评完成</label>-->
                            <!--<div class="col-sm-8">-->
                                <!--<input type="text" id="selfeva" class="form-control" name="selfeva" data-parsley-required="true"-->
                                       <!--placeholder="是否自评完成" value="${obj.selfeva}" >-->
                            <!--</div>-->
                        <!--</div>-->
                        <!--<div class="form-group">-->
                            <!--<label for="verifyeva" class="col-sm-2 control-label">是否审核完成</label>-->
                            <!--<div class="col-sm-8">-->
                                <!--<input type="text" id="verifyeva" class="form-control" name="verifyeva" data-parsley-required="true"-->
                                       <!--placeholder="是否审核完成" value="${obj.verifyeva}" >-->
                            <!--</div>-->
                        <!--</div>-->

                    </div>
                </div>
                <div class="col-lg-3"></div>
                <div class="col-lg-6">
                    <div class="form-group text-center">
                        <label></label>

                        <!--<div>-->
                            <!--<button class="btn btn-primary btn-block btn-lg btn-parsley" data-loading-text="正在提交...">提 交</button>-->
                        <!--</div>-->
                    </div>
                </div>
                </form>
                </section>
            </div>

        </div>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">取 消</button>
        <button id="ok" type="submit" class="btn btn-primary " data-loading-text="正在提交...">确 定</button>
    </div>

<script language="JavaScript">
    $(document).ready(function () {
        $("#ok").on("click",function(){
            if($('#score_s').val()>$('#weights').val()){
                Toast.error("自评分不高于权重值！");
            }else {
                $('#editForm').submit();
            }
        });
        $('#editForm').ajaxForm({
            dataType: 'json',
            beforeSubmit: function (arr, form, options) {
                form.find("button:submit").button("loading");
            },
            success: function (data, statusText, xhr, form) {
                if (data.code == 0) {
                    Toast.success(data.msg);
                    $("#dialogEvaluate").modal("hide");
//                    setTimeout(function () {
//                        $("#goback").trigger("click");
//                    }, 1000);
                } else {
                    Toast.error(data.msg);
                }
                form.find("button:submit").button("reset");
            }
        });
    });
</script>